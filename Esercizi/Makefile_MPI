GCC     = mpicc
OPTIONS = -Wall
# DEBUG   = -ggdb

.PHONY: all clean test

all: mpi_hello.x mpi_ring.x mpi_point2point_comunication.x

mpi_hello.x: mpi_hello.c Makefile
	$(GCC) $(OPTIONS) $< -o $@

mpi_ring.x: mpi_ring.c Makefile
	$(GCC) $(OPTIONS) $< -o $@

mpi_point2point_comunication.x: mpi_point2point_comunication.c Makefile
	$(GCC) $(OPTIONS) $< -o $@

clean:
	rm -rf *.x *~

test: mpi_ring.x
	@echo 'oooOOO... testing ...OOOooo'
	mpirun --oversubscribe -np 10 ./$<
	@echo 'oooOOO... testing ...OOOooo'
